# dfrun - Dockerfile Runner

![Cover Image](./cover.png)
_Generated by [Magic Hour's AI Image Generator](https://magichour.ai/products/ai-image-generator)_

`dfrun` is a simple command-line tool that runs `Dockerfile` instructions directly as shell commands.

It's useful for getting setup on a local environment without having to install docker.

For example:

- Using VSCode Remote SSH on a fresh remote server.
- Configuring a AI/ML Dockerfile to run locally

## Features

- üöÄ Runs Dockerfile commands directly in your shell
- üîÑ Supports multi-line RUN commands
- üì• Handles ADD commands for downloading files
- üåç Sets ENV variables
- üí¨ Interactive ARG prompts with default values
- üìÅ Respects WORKDIR instructions
- üêõ Debug mode for troubleshooting

## Installation

### From Releases

Download the latest release for your platform from the [releases page](https://github.com/magichourhq/dfrun/releases).

#### macOS

Arm Based Macs

```bash
# Download and extract
tar -xzf dfrun-macos-arm64.tar.gz
# Move to a directory in your PATH
sudo mv dfrun /usr/local/bin/
```

Intel Based Macs

```bash
# Download and extract
tar -xzf dfrun-macos-x86_64.tar.gz
# Move to a directory in your PATH
sudo mv dfrun /usr/local/bin/
```

#### Linux

```bash
# Download and extract
tar -xzf dfrun-linux-x86_64.tar.gz
# Move to a directory in your PATH
sudo mv dfrun /usr/local/bin/
```

#### Windows

```powershell
# Extract the archive and add to your PATH
```

### From Source

Reference https://www.rust-lang.org/tools/install to install `cargo` onto your system.

```bash
cargo install --git https://github.com/magichourhq/dfrun
```

## Usage

Basic usage:

```bash
cd /dir/with/Dockerfile
dfrun
```

With a specific Dockerfile:

```bash
dfrun -f path/to/Dockerfile
```

With debug output:

```bash
dfrun --debug
```

### Supported Dockerfile Instructions

`WORKDIR`: This command is ignored.

```dockerfile
WORKDIR /app
```

`RUN`: Executes shell commands

```dockerfile
RUN echo "Hello, World!"
```

`ENV`: Sets environment variables

```dockerfile
ENV MY_VAR=value
```

`ARG`: Prompts for values with optional defaults

```dockerfile
ARG VERSION=1.0
ARG USER
```

`ADD`: Downloads files from URLs

```dockerfile
ADD https://example.com/file.txt .
```

## Development

Requirements:

- Rust 1.70 or later
- Cargo

Setup:

```bash
# Clone the repository after forking
git clone https://github.com/magichourhq/dfrun
cd dfrun

# Install locally
cargo install --path .

# Build
cargo build

# Run tests
cargo test
```

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
